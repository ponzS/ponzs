import{d as w,r as i,u as y,h,a as u,c as d,b as s,f as b,w as p,e as c,t as l,i as m,j as v,k as f,g as x,_ as V}from"./index-A3FkA0VD.js";import{a as S}from"./axios-upsvKRUO.js";import{u as $}from"./user-BaZUsy8b.js";const C={class:"login-container"},D={class:"login-form"},N={type:"submit",class:"btn-animate",style:{"text-align":"center"}},R={class:"links"},q={key:0,class:"message"},z="http://ponzs.com",B=w({__name:"login",setup(I){const o=i({email:"",password:""}),t=i(""),g=y(),_=$(),k=async()=>{var a;try{const e=await S.post(`${z}/api/auth/login`,o.value);e.data.access_token?(_.token=e.data.access_token,localStorage.setItem("token",e.data.access_token),t.value=`登录成功，令牌：${e.data.access_token}`,g.push("/useradmin")):t.value="密码错误"}catch(e){e.response?t.value=((a=e.response.data)==null?void 0:a.message)||"密码错误":e.request?t.value="网络错误或服务器未响应":t.value="登录过程中发生错误"}};return(a,e)=>{const r=h("RouterLink");return u(),d("div",C,[e[3]||(e[3]=s("div",{class:"aurora-layer aurora-layer1"},null,-1)),e[4]||(e[4]=s("div",{class:"aurora-layer aurora-layer2"},null,-1)),s("div",D,[e[2]||(e[2]=s("div",{class:"logo"},[s("h2",{style:{"font-size":"20px","font-weight":"bold"}}," （该系统已弃用，将采用去中心化方案，请等待更新完成） "),s("h2",{style:{"font-size":"20px","font-weight":"bold"}},"TalkFlow ID")],-1)),s("form",{onSubmit:b(k,["prevent"])},[p(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>o.value.email=n),type:"email",placeholder:"Email",required:"",class:"input-animate"},null,512),[[c,o.value.email]]),p(s("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>o.value.password=n),type:"password",placeholder:"Password",required:"",class:"input-animate"},null,512),[[c,o.value.password]]),s("button",N,l(a.$t("routes.login")),1)],32),s("div",R,[m(r,{to:"/register",class:"link-animate"},{default:v(()=>[f(l(a.$t("routes.register")),1)]),_:1}),m(r,{to:"/reset-password",class:"link-animate"},{default:v(()=>[f(l(a.$t("routes.reset-password")),1)]),_:1})]),t.value?(u(),d("div",q,l(t.value),1)):x("",!0)])])}}}),E=V(B,[["__scopeId","data-v-29c596d2"]]);export{E as default};
