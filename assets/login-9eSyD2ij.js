import{n as w,o as i,D as y,E as h,t as u,u as d,v as s,A as x,x as p,z as c,B as l,F as m,G as v,H as f,C as b,_ as V}from"./index-kw_B4tjD.js";import{a as C}from"./axios-upsvKRUO.js";import{u as D}from"./user-CiBam94h.js";const S={class:"login-container"},$={class:"login-form"},z={type:"submit",class:"btn-animate",style:{"text-align":"center"}},B={class:"links"},N={key:0,class:"message"},R="http://ponzs.com",q=w({__name:"login",setup(E){const o=i({email:"",password:""}),t=i(""),g=y(),_=D(),k=async()=>{var a;try{const e=await C.post(`${R}/api/auth/login`,o.value);e.data.access_token?(_.token=e.data.access_token,localStorage.setItem("token",e.data.access_token),t.value=`登录成功，令牌：${e.data.access_token}`,g.push("/useradmin")):t.value="密码错误"}catch(e){e.response?t.value=((a=e.response.data)==null?void 0:a.message)||"密码错误":e.request?t.value="网络错误或服务器未响应":t.value="登录过程中发生错误"}};return(a,e)=>{const r=h("RouterLink");return u(),d("div",S,[e[3]||(e[3]=s("div",{class:"aurora-layer aurora-layer1"},null,-1)),e[4]||(e[4]=s("div",{class:"aurora-layer aurora-layer2"},null,-1)),s("div",$,[e[2]||(e[2]=s("div",{class:"logo"},[s("h2",{style:{"font-size":"20px","font-weight":"bold"}}," （该系统已弃用，将采用去中心化方案，请等待更新完成） "),s("h2",{style:{"font-size":"20px","font-weight":"bold"}},"TalkFlow ID")],-1)),s("form",{onSubmit:x(k,["prevent"])},[p(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>o.value.email=n),type:"email",placeholder:"Email",required:"",class:"input-animate"},null,512),[[c,o.value.email]]),p(s("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>o.value.password=n),type:"password",placeholder:"Password",required:"",class:"input-animate"},null,512),[[c,o.value.password]]),s("button",z,l(a.$t("routes.login")),1)],32),s("div",B,[m(r,{to:"/register",class:"link-animate"},{default:v(()=>[f(l(a.$t("routes.register")),1)]),_:1}),m(r,{to:"/reset-password",class:"link-animate"},{default:v(()=>[f(l(a.$t("routes.reset-password")),1)]),_:1})]),t.value?(u(),d("div",N,l(t.value),1)):b("",!0)])])}}}),U=V(q,[["__scopeId","data-v-29c596d2"]]);export{U as default};
