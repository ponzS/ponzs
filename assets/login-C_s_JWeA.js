import{n as h,o as p,H as b,t as i,u as c,v as x,x as n,y as u,z as s,B as V,C as m,E as _,F as l,I as v,A as B,G as C,_ as S}from"./index-DXLoBayg.js";import{a as $}from"./axios-upsvKRUO.js";import{u as z}from"./user-C3lRn0zg.js";const D={class:"login-container"},I={class:"login-form"},N={type:"submit",class:"btn-animate",style:{"text-align":"center"}},R={class:"links"},q={key:0,class:"message"},E="http://ponzs.com",L=h({__name:"login",setup(T){const o=p({email:"",password:""}),t=p(""),f=b(),g=z(),k=async()=>{var a;try{const e=await $.post(`${E}/api/auth/login`,o.value);e.data.access_token?(g.token=e.data.access_token,localStorage.setItem("token",e.data.access_token),t.value=`登录成功，令牌：${e.data.access_token}`,f.push("/useradmin")):t.value="密码错误"}catch(e){e.response?t.value=((a=e.response.data)==null?void 0:a.message)||"密码错误":e.request?t.value="网络错误或服务器未响应":t.value="登录过程中发生错误"}};return(a,e)=>{const d=i("RouterLink"),y=i("ion-content"),w=i("ion-page");return c(),x(w,null,{default:n(()=>[u(y,null,{default:n(()=>[s("div",D,[e[3]||(e[3]=s("div",{class:"aurora-layer aurora-layer1"},null,-1)),e[4]||(e[4]=s("div",{class:"aurora-layer aurora-layer2"},null,-1)),s("div",I,[e[2]||(e[2]=s("div",{class:"logo"},[s("h2",{style:{"font-size":"20px","font-weight":"bold"}}," （该系统已弃用，将采用去中心化方案，请等待更新完成） "),s("h2",{style:{"font-size":"20px","font-weight":"bold"}},"TalkFlow ID")],-1)),s("form",{onSubmit:V(k,["prevent"])},[m(s("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>o.value.email=r),type:"email",placeholder:"Email",required:"",class:"input-animate"},null,512),[[_,o.value.email]]),m(s("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.value.password=r),type:"password",placeholder:"Password",required:"",class:"input-animate"},null,512),[[_,o.value.password]]),s("button",N,l(a.$t("routes.login")),1)],32),s("div",R,[u(d,{to:"/register",class:"link-animate"},{default:n(()=>[v(l(a.$t("routes.register")),1)]),_:1}),u(d,{to:"/reset-password",class:"link-animate"},{default:n(()=>[v(l(a.$t("routes.reset-password")),1)]),_:1})]),t.value?(c(),B("div",q,l(t.value),1)):C("",!0)])])]),_:1})]),_:1})}}}),M=S(L,[["__scopeId","data-v-b2156311"]]);export{M as default};
