import{d as I,r as m,h as C,a as f,c as w,b as s,t as n,i as x,j as U,k as $,f as q,w as i,e as u,g as y,_ as P}from"./index-A3FkA0VD.js";import{a as b}from"./axios-upsvKRUO.js";const D={class:"register-container"},N={class:"register-form"},S={class:"logo"},B={style:{"font-size":"20px","font-weight":"bold"}},L={key:0,class:"error-message"},R={type:"submit",class:"btn-animate"},z=["disabled"],E={key:0,class:"message"},k="http://ponzs.com",M=I({__name:"register",setup(T){const a=m({email:"",steamId:"",password:"",confirmPassword:"",nickname:"",code:""}),r=m(""),d=m(!1),v=m(60);let c=null;const p=m(""),_=async()=>{var o,e;if(!d.value)try{const l=await b.post(`${k}/api/auth/send-verification-code`,{email:a.value.email});r.value=l.data.message,V()}catch(l){r.value=((e=(o=l.response)==null?void 0:o.data)==null?void 0:e.message)||"发送验证码失败"}},V=()=>{d.value=!0,v.value=60,c=setInterval(()=>{v.value>0?v.value--:(c&&clearInterval(c),d.value=!1)},1e3)},g=()=>{a.value.password!==a.value.confirmPassword?p.value="两次输入的密码不一致":p.value=""},h=async()=>{var o,e;if(a.value.password!==a.value.confirmPassword){p.value="两次输入的密码不一致";return}try{const l=await b.post(`${k}/api/auth/register`,a.value);r.value=l.data.message}catch(l){r.value=((e=(o=l.response)==null?void 0:o.data)==null?void 0:e.message)||"注册失败"}};return(o,e)=>{const l=C("RouterLink");return f(),w("div",D,[e[6]||(e[6]=s("div",{class:"aurora-layer aurora-layer1"},null,-1)),e[7]||(e[7]=s("div",{class:"aurora-layer aurora-layer2"},null,-1)),s("div",N,[s("div",S,[s("h2",B,n(o.$t("routes.register")),1)]),x(l,{to:"/login",class:"back-button"},{default:U(()=>[$("← "+n(o.$t("routes.login")),1)]),_:1}),s("form",{onSubmit:q(h,["prevent"])},[i(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.email=t),type:"email",placeholder:"邮箱",required:"",class:"input-animate"},null,512),[[u,a.value.email]]),i(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.steamId=t),type:"text",placeholder:"Steam ID",required:"",class:"input-animate"},null,512),[[u,a.value.steamId]]),i(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.password=t),type:"password",placeholder:"密码",required:"",class:"input-animate",onInput:g},null,544),[[u,a.value.password]]),i(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.confirmPassword=t),type:"password",placeholder:"确认密码",required:"",class:"input-animate",onInput:g},null,544),[[u,a.value.confirmPassword]]),p.value?(f(),w("div",L,n(p.value),1)):y("",!0),i(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.nickname=t),type:"text",placeholder:"昵称",required:"",class:"input-animate"},null,512),[[u,a.value.nickname]]),i(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.code=t),type:"text",placeholder:"验证码",required:"",class:"input-animate"},null,512),[[u,a.value.code]]),s("button",R,n(o.$t("routes.register")),1)],32),s("button",{disabled:d.value,onClick:_,class:"btn-animate"},n(d.value?`再次发送请等待 ${v.value} 秒`:o.$t("routes.send-code")),9,z),r.value?(f(),w("div",E,n(r.value),1)):y("",!0)])])}}}),F=P(M,[["__scopeId","data-v-11e7f539"]]);export{F as default};
