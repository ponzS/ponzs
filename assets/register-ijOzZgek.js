import{n as h,o as m,E as C,t as f,u as w,v as s,B as r,F as x,G as U,H as $,A as q,x as i,z as u,C as y,_ as P}from"./index-B6k_4lB8.js";import{a as b}from"./axios-upsvKRUO.js";const B={class:"register-container"},D={class:"register-form"},N={class:"logo"},S={style:{"font-size":"20px","font-weight":"bold"}},z={key:0,class:"error-message"},E={type:"submit",class:"btn-animate"},L=["disabled"],R={key:0,class:"message"},_="http://ponzs.com",M=h({__name:"register",setup(T){const a=m({email:"",steamId:"",password:"",confirmPassword:"",nickname:"",code:""}),n=m(""),d=m(!1),v=m(60);let c=null;const p=m(""),k=async()=>{var o,e;if(!d.value)try{const l=await b.post(`${_}/api/auth/send-verification-code`,{email:a.value.email});n.value=l.data.message,V()}catch(l){n.value=((e=(o=l.response)==null?void 0:o.data)==null?void 0:e.message)||"发送验证码失败"}},V=()=>{d.value=!0,v.value=60,c=setInterval(()=>{v.value>0?v.value--:(c&&clearInterval(c),d.value=!1)},1e3)},g=()=>{a.value.password!==a.value.confirmPassword?p.value="两次输入的密码不一致":p.value=""},I=async()=>{var o,e;if(a.value.password!==a.value.confirmPassword){p.value="两次输入的密码不一致";return}try{const l=await b.post(`${_}/api/auth/register`,a.value);n.value=l.data.message}catch(l){n.value=((e=(o=l.response)==null?void 0:o.data)==null?void 0:e.message)||"注册失败"}};return(o,e)=>{const l=C("RouterLink");return f(),w("div",B,[e[6]||(e[6]=s("div",{class:"aurora-layer aurora-layer1"},null,-1)),e[7]||(e[7]=s("div",{class:"aurora-layer aurora-layer2"},null,-1)),s("div",D,[s("div",N,[s("h2",S,r(o.$t("routes.register")),1)]),x(l,{to:"/login",class:"back-button"},{default:U(()=>[$("← "+r(o.$t("routes.login")),1)]),_:1}),s("form",{onSubmit:q(I,["prevent"])},[i(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.email=t),type:"email",placeholder:"邮箱",required:"",class:"input-animate"},null,512),[[u,a.value.email]]),i(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.steamId=t),type:"text",placeholder:"Steam ID",required:"",class:"input-animate"},null,512),[[u,a.value.steamId]]),i(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.password=t),type:"password",placeholder:"密码",required:"",class:"input-animate",onInput:g},null,544),[[u,a.value.password]]),i(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.confirmPassword=t),type:"password",placeholder:"确认密码",required:"",class:"input-animate",onInput:g},null,544),[[u,a.value.confirmPassword]]),p.value?(f(),w("div",z,r(p.value),1)):y("",!0),i(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.nickname=t),type:"text",placeholder:"昵称",required:"",class:"input-animate"},null,512),[[u,a.value.nickname]]),i(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.code=t),type:"text",placeholder:"验证码",required:"",class:"input-animate"},null,512),[[u,a.value.code]]),s("button",E,r(o.$t("routes.register")),1)],32),s("button",{disabled:d.value,onClick:k,class:"btn-animate"},r(d.value?`再次发送请等待 ${v.value} 秒`:o.$t("routes.send-code")),9,L),n.value?(f(),w("div",R,r(n.value),1)):y("",!0)])])}}}),G=P(M,[["__scopeId","data-v-11e7f539"]]);export{G as default};
