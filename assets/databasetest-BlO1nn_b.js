import{d as E,r,o as P,a as l,c as o,b as t,w as v,e as b,f as $,v as B,F as g,l as _,ag as w,t as i,n as V,_ as j}from"./index-A3FkA0VD.js";import{A as h}from"./config-DaGrT2J7.js";const D=[{value:"type1",label:"自定义模型权限"},{value:"type2",label:"模型1"},{value:"type3",label:"模型2"},{value:"type4",label:"模型3"},{value:"type5",label:"模型4"},{value:"type6",label:"模型5"},{value:"type7",label:"模型6"},{value:"type8",label:"模型7"},{value:"type9",label:"模型8"},{value:"type10",label:"模型9"}],L={class:"bg1"},R={key:0,class:"auth-container"},F={key:1},I={class:"content-container"},N=["value"],O={class:"cards-section"},z={class:"cards-list"},J={class:"card-content"},Y={class:"card-code"},q={class:"remaining-time"},G={class:"status"},H="20241205",K=E({__name:"databasetest",setup(Q){const u=r("type1"),c=r(30),S=r(null),f=r([]),d=r(""),y=r(!1);function C(){d.value===H?y.value=!0:alert("密码错误，请重试。")}async function m(){try{const e=await(await fetch(`${h}/cards/list`)).json();e.success&&(f.value=e.cards)}catch(a){console.error("Error fetching cards:",a)}}async function k(){try{const e=await(await fetch(`${h}/cards/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:u.value,validDays:c.value})})).json();e.success&&(S.value=e.card,await m())}catch(a){console.error("Error generating card:",a)}}function T(a){const e=new Date().getTime(),n=new Date(a).getTime()-e;if(n<=0)return"已过期";const p=Math.floor(n/(1e3*60*60*24)),M=Math.floor(n%(1e3*60*60*24)/(1e3*60*60)),A=Math.floor(n%(1e3*60*60)/(1e3*60));return`${p}天 ${M}小时 ${A}分钟`}function U(a){return new Date(a.validUntil)<new Date?"text-red-500":"text-green-500"}function x(a){return new Date(a.validUntil)<new Date?"已过期":"可用"}return P(()=>{m()}),(a,e)=>(l(),o("div",L,[y.value?(l(),o("div",F,[t("div",I,[e[7]||(e[7]=t("h1",{class:"page-title"},"生成卡密",-1)),t("form",{onSubmit:$(k,["prevent"]),class:"form"},[t("div",null,[v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),class:"select-input"},[(l(!0),o(g,null,_(w(D),s=>(l(),o("option",{key:s.value,value:s.value},i(s.label),9,N))),128))],512),[[B,u.value]])]),t("div",null,[e[4]||(e[4]=t("label",{class:"input-label"},"有效天数",-1)),v(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=s=>c.value=s),class:"number-input"},null,512),[[b,c.value]])]),e[5]||(e[5]=t("button",{type:"submit",class:"submit-button"},"生成卡密",-1))],32),t("div",O,[e[6]||(e[6]=t("h2",{class:"section-title"},"已生成的卡密",-1)),t("div",z,[(l(!0),o(g,null,_(f.value,s=>{var n;return l(),o("div",{key:s.code,class:"card-item"},[t("div",J,[t("div",null,[t("p",Y,"卡密: "+i(s.code),1),t("p",null,"类型: "+i(s.type),1),t("p",null," 权限类型："+i((n=w(D).find(p=>p.value===s.type))==null?void 0:n.label),1),t("p",null,"有效期至: "+i(new Date(s.validUntil).toLocaleString()),1),t("p",q," 剩余时间: "+i(T(s.validUntil)),1)]),t("div",G,[t("span",{class:V(U(s))},i(x(s)),3)])])])}),128))])])])])):(l(),o("div",R,[e[3]||(e[3]=t("h1",{class:"page-title"},"请输入管理员密码",-1)),v(t("input",{type:"password","onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),class:"password-input",placeholder:"输入密码"},null,512),[[b,d.value]]),t("button",{onClick:C,class:"submit-button"},"确认")]))]))}}),Z=j(K,[["__scopeId","data-v-32014c18"]]);export{Z as default};
