import{n as B,o as r,q as E,t as l,u as o,v as t,x as v,z as b,A as P,y as $,M as _,L as g,J as w,B as i,a2 as L,_ as V}from"./index-kw_B4tjD.js";import{A as h}from"./config-DaGrT2J7.js";const D=[{value:"type1",label:"自定义模型权限"},{value:"type2",label:"模型1"},{value:"type3",label:"模型2"},{value:"type4",label:"模型3"},{value:"type5",label:"模型4"},{value:"type6",label:"模型5"},{value:"type7",label:"模型6"},{value:"type8",label:"模型7"},{value:"type9",label:"模型8"},{value:"type10",label:"模型9"}],j={class:"bg1"},R={key:0,class:"auth-container"},z={key:1},I={class:"content-container"},J=["value"],N={class:"cards-section"},O={class:"cards-list"},q={class:"card-content"},F={class:"card-code"},Y={class:"remaining-time"},G={class:"status"},H="20241205",K=B({__name:"databasetest",setup(Q){const u=r("type1"),c=r(30),S=r(null),f=r([]),d=r(""),y=r(!1);function C(){d.value===H?y.value=!0:alert("密码错误，请重试。")}async function m(){try{const e=await(await fetch(`${h}/cards/list`)).json();e.success&&(f.value=e.cards)}catch(a){console.error("Error fetching cards:",a)}}async function k(){try{const e=await(await fetch(`${h}/cards/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:u.value,validDays:c.value})})).json();e.success&&(S.value=e.card,await m())}catch(a){console.error("Error generating card:",a)}}function x(a){const e=new Date().getTime(),n=new Date(a).getTime()-e;if(n<=0)return"已过期";const p=Math.floor(n/(1e3*60*60*24)),U=Math.floor(n%(1e3*60*60*24)/(1e3*60*60)),A=Math.floor(n%(1e3*60*60)/(1e3*60));return`${p}天 ${U}小时 ${A}分钟`}function M(a){return new Date(a.validUntil)<new Date?"text-red-500":"text-green-500"}function T(a){return new Date(a.validUntil)<new Date?"已过期":"可用"}return E(()=>{m()}),(a,e)=>(l(),o("div",j,[y.value?(l(),o("div",z,[t("div",I,[e[7]||(e[7]=t("h1",{class:"page-title"},"生成卡密",-1)),t("form",{onSubmit:P(k,["prevent"]),class:"form"},[t("div",null,[v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),class:"select-input"},[(l(!0),o(_,null,g(w(D),s=>(l(),o("option",{key:s.value,value:s.value},i(s.label),9,J))),128))],512),[[$,u.value]])]),t("div",null,[e[4]||(e[4]=t("label",{class:"input-label"},"有效天数",-1)),v(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=s=>c.value=s),class:"number-input"},null,512),[[b,c.value]])]),e[5]||(e[5]=t("button",{type:"submit",class:"submit-button"},"生成卡密",-1))],32),t("div",N,[e[6]||(e[6]=t("h2",{class:"section-title"},"已生成的卡密",-1)),t("div",O,[(l(!0),o(_,null,g(f.value,s=>{var n;return l(),o("div",{key:s.code,class:"card-item"},[t("div",q,[t("div",null,[t("p",F,"卡密: "+i(s.code),1),t("p",null,"类型: "+i(s.type),1),t("p",null," 权限类型："+i((n=w(D).find(p=>p.value===s.type))==null?void 0:n.label),1),t("p",null,"有效期至: "+i(new Date(s.validUntil).toLocaleString()),1),t("p",Y," 剩余时间: "+i(x(s.validUntil)),1)]),t("div",G,[t("span",{class:L(M(s))},i(T(s)),3)])])])}),128))])])])])):(l(),o("div",R,[e[3]||(e[3]=t("h1",{class:"page-title"},"请输入管理员密码",-1)),v(t("input",{type:"password","onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),class:"password-input",placeholder:"输入密码"},null,512),[[b,d.value]]),t("button",{onClick:C,class:"submit-button"},"确认")]))]))}}),Z=V(K,[["__scopeId","data-v-32014c18"]]);export{Z as default};
