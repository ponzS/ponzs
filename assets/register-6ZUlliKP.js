import{n as q,o as c,t as f,u as g,v as P,x as w,y as _,z as t,F as r,I as B,B as D,C as i,E as u,A as b,G as k,_ as N}from"./index-DXLoBayg.js";import{a as I}from"./axios-upsvKRUO.js";const S={class:"register-container"},z={class:"register-form"},E={class:"logo"},L={style:{"font-size":"20px","font-weight":"bold"}},R={key:0,class:"error-message"},M={type:"submit",class:"btn-animate"},T=["disabled"],A={key:0,class:"message"},V="http://ponzs.com",F=q({__name:"register",setup(G){const a=c({email:"",steamId:"",password:"",confirmPassword:"",nickname:"",code:""}),l=c(""),d=c(!1),m=c(60);let v=null;const p=c(""),h=async()=>{var o,e;if(!d.value)try{const n=await I.post(`${V}/api/auth/send-verification-code`,{email:a.value.email});l.value=n.data.message,C()}catch(n){l.value=((e=(o=n.response)==null?void 0:o.data)==null?void 0:e.message)||"发送验证码失败"}},C=()=>{d.value=!0,m.value=60,v=setInterval(()=>{m.value>0?m.value--:(v&&clearInterval(v),d.value=!1)},1e3)},y=()=>{a.value.password!==a.value.confirmPassword?p.value="两次输入的密码不一致":p.value=""},x=async()=>{var o,e;if(a.value.password!==a.value.confirmPassword){p.value="两次输入的密码不一致";return}try{const n=await I.post(`${V}/api/auth/register`,a.value);l.value=n.data.message}catch(n){l.value=((e=(o=n.response)==null?void 0:o.data)==null?void 0:e.message)||"注册失败"}};return(o,e)=>{const n=f("RouterLink"),U=f("ion-content"),$=f("ion-page");return g(),P($,null,{default:w(()=>[_(U,null,{default:w(()=>[t("div",S,[e[6]||(e[6]=t("div",{class:"aurora-layer aurora-layer1"},null,-1)),e[7]||(e[7]=t("div",{class:"aurora-layer aurora-layer2"},null,-1)),t("div",z,[t("div",E,[t("h2",L,r(o.$t("routes.register")),1)]),_(n,{to:"/login",class:"back-button"},{default:w(()=>[B("← "+r(o.$t("routes.login")),1)]),_:1}),t("form",{onSubmit:D(x,["prevent"])},[i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.email=s),type:"email",placeholder:"邮箱",required:"",class:"input-animate"},null,512),[[u,a.value.email]]),i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.steamId=s),type:"text",placeholder:"Steam ID",required:"",class:"input-animate"},null,512),[[u,a.value.steamId]]),i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.password=s),type:"password",placeholder:"密码",required:"",class:"input-animate",onInput:y},null,544),[[u,a.value.password]]),i(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.confirmPassword=s),type:"password",placeholder:"确认密码",required:"",class:"input-animate",onInput:y},null,544),[[u,a.value.confirmPassword]]),p.value?(g(),b("div",R,r(p.value),1)):k("",!0),i(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.nickname=s),type:"text",placeholder:"昵称",required:"",class:"input-animate"},null,512),[[u,a.value.nickname]]),i(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>a.value.code=s),type:"text",placeholder:"验证码",required:"",class:"input-animate"},null,512),[[u,a.value.code]]),t("button",M,r(o.$t("routes.register")),1)],32),t("button",{disabled:d.value,onClick:h,class:"btn-animate"},r(d.value?`再次发送请等待 ${m.value} 秒`:o.$t("routes.send-code")),9,T),l.value?(g(),b("div",A,r(l.value),1)):k("",!0)])])]),_:1})]),_:1})}}}),J=N(F,[["__scopeId","data-v-84fff15c"]]);export{J as default};
